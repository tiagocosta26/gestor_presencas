<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8-sig">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestor de Presenças – Clan 5</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    h2 {
      color: #ff0000;
    }
    .form-control, .btn {
      border-radius: 10px;
    }
    .card {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="container mt-4">
  <div class="card p-4">
    <h2 class="text-center">Gestor de Presenças – Clan 5</h2>
    <form method="post" class="mt-4">
        <div class="mb-3">
          <label for="atividade" class="form-label">Nome da Atividade:</label>
          <input type="text" class="form-control" id="atividade" name="atividade" required>
        </div>
      
        <div class="mb-3">
          <label class="form-label">Data:</label>
          <label>De:</label>
          <input type="date" name="data_inicio" value="{{ hoje }}" required>
          <label class="ms-3">Até:</label>
          <input type="date" name="data_fim" value="{{ hoje }}" required>
        </div>
      
        <div class="mb-3">
          <label class="form-label">Adicionar Tribo:</label>
          <select class="form-select" id="selectorTribo">
            <option value="">-- Escolher tribo --</option>
            <option value="benenson">Tribo Peter Benenson</option>
            <option value="dunant">Tribo Henri Dunant</option>
            <option value="leonor">Tribo Rainha Dona Leonor</option>
          </select>
          <button type="button" class="btn btn-outline-primary mt-2" onclick="adicionarTribo()">Adicionar Tribo</button>
        </div>
      
        <div id="presencas" class="mt-4">
          <h3>Presenças:</h3>
      
          <div id="benenson" class="grupo" style="display:none">
            <h5 class="mt-3">Tribo Peter Benenson</h5>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Tiago Costa" value="Sim" id="presenca_Tiago Costa"><label class="form-check-label" for="presenca_Tiago Costa">Tiago Costa</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Filipa Moreno" value="Sim" id="presenca_Filipa Moreno"><label class="form-check-label" for="presenca_Filipa Moreno">Filipa Moreno</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Inês Caetano" value="Sim" id="presenca_Inês Caetano"><label class="form-check-label" for="presenca_Inês Caetano">Inês Caetano</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Maria Farropas" value="Sim" id="presenca_Maria Farropas"><label class="form-check-label" for="presenca_Maria Farropas">Maria Farropas</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Rodrigo Morais" value="Sim" id="presenca_Rodrigo Morais"><label class="form-check-label" for="presenca_Rodrigo Morais">Rodrigo Morais</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Ana Sofia Matos" value="Sim" id="presenca_Ana Sofia Matos"><label class="form-check-label" for="presenca_Ana Sofia Matos">Ana Sofia Matos</label></div>
          </div>
      
          <div id="dunant" class="grupo" style="display:none">
            <h5 class="mt-3">Tribo Henri Dunant</h5>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Leonor Cera" value="Sim" id="presenca_Leonor Cera"><label class="form-check-label" for="presenca_Leonor Cera">Leonor Cera</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Diana Moreno" value="Sim" id="presenca_Diana Moreno"><label class="form-check-label" for="presenca_Diana Moreno">Diana Moreno</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Filipe Mendes" value="Sim" id="presenca_Filipe Mendes"><label class="form-check-label" for="presenca_Filipe Mendes">Filipe Mendes</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Gonçalo Silvestre" value="Sim" id="presenca_Gonçalo Silvestre"><label class="form-check-label" for="presenca_Gonçalo Silvestre">Gonçalo Silvestre</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Maria Canto" value="Sim" id="presenca_Maria Canto"><label class="form-check-label" for="presenca_Maria Canto">Maria Canto</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Leandro Alberto" value="Sim" id="presenca_Leandro Alberto"><label class="form-check-label" for="presenca_Leandro Alberto">Leandro Alberto</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Diogo Caetano" value="Sim" id="presenca_Diogo Caetano"><label class="form-check-label" for="presenca_Diogo Caetano">Diogo Caetano</label></div>
          </div>
      
          <div id="leonor" class="grupo" style="display:none">
            <h5 class="mt-3">Tribo Rainha Dona Leonor</h5>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_António Faustino" value="Sim" id="presenca_António Faustino"><label class="form-check-label" for="presenca_António Faustino">António Faustino</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Rafael Ferreira" value="Sim" id="presenca_Rafael Ferreira"><label class="form-check-label" for="presenca_Rafael Ferreira">Rafael Ferreira</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Lara Serra" value="Sim" id="presenca_Lara Serra"><label class="form-check-label" for="presenca_Lara Serra">Lara Serra</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Marta Mendes" value="Sim" id="presenca_Marta Mendes"><label class="form-check-label" for="presenca_Marta Mendes">Marta Mendes</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Mariana Quitério" value="Sim" id="presenca_Mariana Quitério"><label class="form-check-label" for="presenca_Mariana Quitério">Mariana Quitério</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" name="presenca_Joana Caetano" value="Sim" id="presenca_Joana Caetano"><label class="form-check-label" for="presenca_Joana Caetano">Joana Caetano</label></div>
          </div>
        </div>
      
        <input type="hidden" name="tribos_selecionadas" id="tribos_selecionadas">
      
        <button type="submit" class="btn btn-primary btn-lg w-100 mt-4">Guardar</button>

        <a href="{{ url_for('atividades') }}" class="btn btn-outline-secondary w-100 mt-2">Ver Atividades Registadas</a>

      </form>
      
      <script>
        let tribosAdicionadas = [];
      
        function adicionarTribo() {
          const tribo = document.getElementById('selectorTribo').value;
          if (tribo && !tribosAdicionadas.includes(tribo)) {
            document.getElementById(tribo).style.display = 'block';
            tribosAdicionadas.push(tribo);
            document.getElementById('tribos_selecionadas').value = tribosAdicionadas.join(',');
          }
        }
      </script>      
  </div>
</body>
</html>
